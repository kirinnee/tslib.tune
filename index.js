!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o=e();for(var n in o)("object"==typeof exports?exports:t)[n]=o[n]}}("undefined"!=typeof window?window:this,function(){return function(o){var n={};function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=o,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,o){"use strict";o.r(e);var i=function(){function t(t,e,o,n,i,r){this.volume=1,this.groupVolume=1,this.speed=1,this.isPlaying=!1,this.isPaused=!1,t.AssertExtend(),this.easeFactory=e,this.TweenLite=o;var s=this,u={src:r,volume:1,loop:!1,html5:!1,rate:1,onload:function(){i(!0)},onloaderror:function(){i(!1)},onend:function(){if(this.loop()||(s.isPlaying=!1),"function"==typeof s.callback){var t=s.callback;this.loop()||(s.callback=void 0),t()}if("function"==typeof s.onEnd){t=s.onEnd;this.loop()||(s.onEnd=void 0),t()}},onstop:function(){if("function"==typeof s.callback){var t=s.callback;s.callback=void 0,t()}if("function"==typeof s.onStop){t=s.onStop;s.onStop=void 0,t()}}};this.howl=new n(u)}return Object.defineProperty(t.prototype,"rate",{get:function(){return this.howl.rate()},enumerable:!0,configurable:!0}),t.prototype.Play=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=function(){}),this.isPlaying||this.isPaused||(this.Clean(),this.howl.loop(t),this.howl.seek(0),this.howl.play(),this.callback=e,this.isPlaying=!0)},t.prototype.Resume=function(){!this.isPlaying&&this.isPaused&&(this.howl.play(),this.isPlaying=!0,this.isPaused=!1)},t.prototype.Pause=function(){this.isPlaying&&(this.howl.pause(),this.isPlaying=!1,this.isPaused=!0)},t.prototype.Stop=function(){this.howl.stop(),this.isPlaying=!1,this.isPaused=!1},t.prototype.PlayFrom=function(t,e,o){if(!this.isPlaying&&!this.isPaused){this.Clean(),this.howl.seek(t),this.howl.loop(!1),this.howl.play(),this.callback=o,this.isPlaying=!0;var n=this;e&&(this.onEnd=function(){n.PlayFrom(t,e,o)})}},t.prototype.PlayFor=function(t,e,o){if(!this.isPlaying&&!this.isPaused){this.Clean(),this.howl.seek(0),this.howl.loop(!1),this.howl.play(),this.isPlaying=!0;var n=this,i=setInterval(function(){n.isPlaying||n.isPaused||(clearInterval(i),"function"==typeof o&&o()),n.Seek()>=t&&("function"==typeof o&&o(),e?n.howl.seek(0):(clearInterval(i),n.Stop()))},1)}},t.prototype.PlayFromTo=function(t,e,o,n){this.PlayFromFor(t,e-t,o,n)},t.prototype.PlayFromFor=function(t,e,o,n){if(!this.isPlaying&&!this.isPaused){this.Clean(),this.howl.seek(t),this.howl.loop(!1),this.howl.play(),this.isPlaying=!0;var i=this,r=setInterval(function(){i.isPlaying||i.isPaused||(clearInterval(r),"function"==typeof n&&n()),i.Seek()>=e+t&&("function"==typeof n&&n(),o?i.howl.seek(t):(clearInterval(r),i.Stop()))},1)}},t.prototype.FadeIn=function(t,e,o){this.Volume(0,1,t,e,o)},t.prototype.FadeOut=function(t,e,o){this.Volume(1,0,t,e,o)},t.prototype.SetRate=function(t){this.howl.rate(t)},t.prototype.Rate=function(t,e,o,n,i){var r=this;void 0===e&&(e=t),void 0===o&&(o=0),void 0===n&&(n=function(){}),void 0===i&&(i=this.easeFactory.Constant()),this.TweenLite.fromTo(this,o,{speed:t},{speed:e,immediateRender:!0,onComplete:n,onUpdate:function(){r.SetRate(r.speed)},ease:i.Get()})},t.prototype.SetVolume=function(t){this.volume=t.Clamp(0,1),this.howl.volume(t*this.groupVolume)},t.prototype.AdjustGroupVolume=function(t){this.groupVolume=t,this.SetVolume(this.volume)},t.prototype.Volume=function(t,e,o,n,i){var r=this;void 0===e&&(e=t),void 0===o&&(o=0),void 0===n&&(n=function(){}),void 0===i&&(i=this.easeFactory.Constant()),this.TweenLite.fromTo(this,o,{volume:t},{volume:e,immediateRender:!0,onComplete:n,onUpdate:function(){r.SetVolume(r.volume)},ease:i.Get()})},t.prototype.Seek=function(){return this.howl.seek()},t.prototype.Clean=function(){this.callback=void 0,this.onEnd=void 0,this.onStop=void 0},t}(),a=function(){function t(t,e){this.rate=1,this.volume=1,this.source=e,this.soundGroup=t}return Object.defineProperty(t.prototype,"Sauce",{get:function(){return this.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Group",{get:function(){return this.soundGroup},enumerable:!0,configurable:!0}),t}(),n=function(){function t(t,e,o,n){t.AssertExtend(),this.core=t,this.howl=o,this.TweenLite=n,this.factory=e}return t.prototype.CreateGameSound=function(t,e,o){void 0===o&&(o=function(){});var n=new i(this.core,this.factory,this.TweenLite,this.howl,o,e);return t.RegisterGameSound(n),n},t.prototype.CreateEmptySound=function(t,e){return new a(t,e)},t.prototype.LoadEmptySound=function(t,o){var e=this;void 0===o&&(o=function(){});var n=this.core.FlattenClass(t,a),i=n.size,r=0,s=0,u=this;return n.MapValue(function(t){return e.CreateGameSound(t.Group,t.Sauce,function(t){t?r++:s++;var e=u.ConstructEventObject(u,i,r,s);o(e)})}).AsObject()},t.prototype.ConstructEventObject=function(t,e,o,n){var i=o+n,r=i+"/"+e;return{failed:n,succeeded:o,total:e,progress:{linear:{percentage:(i/e).toFixed(2)+"%",over:r,value:i/e},tangential:{percentage:t.tangentProgess(i,e,5).toFixed(2)+"%",over:r,value:t.tangentProgess(i,e,5)}}}},t.prototype.tangentProgess=function(t,e,o){return Math.tan(t*Math.atan(o)/e)/o},t}(),r=function(){function t(t,e){t.AssertExtend(),this.core=t,this.id=e,this.volume=1,this.sounds=[]}return Object.defineProperty(t.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),t.prototype.RegisterGameSound=function(t){var e=this.core.WrapArray(t);this.sounds=this.sounds.concat(e)},t.prototype.SetVolume=function(t){this.volume=t.Clamp(0,1),this.UpdateVolume()},t.prototype.IncreaseVolume=function(t){this.SetVolume(this.volume+t)},t.prototype.DecreaseVolume=function(t){this.SetVolume(this.volume-t)},t.prototype.UpdateVolume=function(){var e=this;this.sounds.Map(function(t){return t.AdjustGroupVolume(e.volume)})},t}(),s=function(){function t(t){t.AssertExtend(),this.core=t}return t.prototype.CreateSoundGroup=function(t){return new r(this.core,t)},t}();o.d(e,"SoundGroupFactory",function(){return s}),o.d(e,"GameSoundFactory",function(){return n})}])});